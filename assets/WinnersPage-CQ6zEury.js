import{b as x,j as s,r as h,W as o,a as j,f as i,w,g as l,d as W,F as C}from"./index-DKNiYX8_.js";import{S as P,u as y,B as S,d as g,b as f,s as p,c as N,T,P as I,H as A}from"./Total-D1EErySd.js";const B="_car_1wfif_1",Q="_car__icon_1wfif_13",d={car:B,car__icon:Q};function b({carID:e}){const{data:n}=x.useGetCarQuery(e);return n?s.jsx("div",{className:d.car,style:{color:n.color},children:s.jsx(P,{className:d.car__icon})}):null}function v({carID:e}){const{data:n}=x.useGetCarQuery(e);return n?s.jsx("p",{children:n==null?void 0:n.name}):null}const R="_main_1qiet_1",k="_main__header_1qiet_48",m={main:R,main__header:k},D="_winners_1xpvh_1",G="_winners__row_1xpvh_15",L="_winners__row_type_header_1xpvh_33",_={winners:D,winners__row:G,winners__row_type_header:L};function u({btnText:e,sortBy:n}){const a=y(),[t,r]=h.useState(o.ASC);function c(){a(j.mutateWinnersQueryParams({[i.SORT]:n,[i.ORDER]:t})),r(t===o.ASC?o.DESC:o.ASC)}return s.jsx(S,{kit:g.TABLE_M_YELLOW,onClick:c,children:e})}function M({}){const e=f(p.winnersQueryParams),{data:n,isError:a}=w.useGetWinnersQuery(e),t=n==null?void 0:n.data;return h.useEffect(()=>{if(a)throw new Error("Error while fetching winners | check if the mock server is running, see Readme.md.")},[a]),t?s.jsxs("section",{className:_.winners,children:[s.jsxs("div",{className:N(_.winners__row,_.winners__row_type_header),children:[s.jsx(u,{btnText:"â„–",sortBy:l.ID}),s.jsx("p",{children:"CAR"}),s.jsx("p",{children:"NAME"}),s.jsx(u,{btnText:"WINS",sortBy:l.WINS}),s.jsx(u,{btnText:"BEST TIME",sortBy:l.TIME})]}),t==null?void 0:t.map(r=>s.jsxs("div",{className:_.winners__row,children:[s.jsx("p",{children:r.id}),s.jsx(b,{carID:r.id}),s.jsx(v,{carID:r.id}),s.jsx("p",{children:r.wins}),s.jsx("p",{children:r.time})]},r.id))]}):s.jsx("p",{children:"Loading..."})}const O="_section_aomr2_1",F={section:O};function $({}){const e=y(),n=f(p.winnersQueryParams),{data:a}=w.useGetWinnersQuery(n),t=n[i.PAGE],r=n[i.LIMIT],c=a==null?void 0:a.totalCount;return s.jsxs("section",{className:F.section,children:[s.jsx(T,{entity:"Records",total:c||0}),s.jsx(I,{currentPage:t||1,limit:r||1,totalCount:c||1,scrollPage:E=>e(j.mutateWinnersQueryParams({[i.PAGE]:E}))})]})}function K(){return s.jsxs(s.Fragment,{children:[s.jsx(A,{}),s.jsxs("main",{className:m.main,children:[s.jsx("h1",{className:m.main__header,children:"WINNERS"}),s.jsx(W,{fallback:e=>s.jsx(C,{text:(e==null?void 0:e.message)||"Undefined error"}),children:s.jsx(M,{})}),s.jsx($,{})]})]})}export{K as default};
